(function($){"use strict";var u=document.documentElement.style,hasTextWrap=(u.textWrap||u.WebkitTextWrap||u.MozTextWrap||u.MsTextWrap||u.OTextWrap);function NextWS_params(){this.reset()}NextWS_params.prototype.reset=function(){this.index=0;this.width=0};var v=function(c){return Boolean(c.match(/^\s$/))};var x=function(a){a.find('br[data-owner="balance-text"]').replaceWith(document.createTextNode(" "))};var y=function(a,b){return((b===0)||(b===a.length)||(v(a.charAt(b-1))&&!v(a.charAt(b))))};var z=function(a,b,d,e,f,c,g){var w;for(;;){while(!y(b,c)){c+=f}a.text(b.substr(0,c));w=a.width();if((f<0)?((w<=e)||(w<=0)||(c===0)):((e<=w)||(d<=w)||(c===b.length))){break}c+=f}g.index=c;g.width=w};$.fn.balanceText=function(){if(hasTextWrap){return this}return this.each(function(){var a=$(this);var b=5000;x(a);var c=a.width();var d=a.height();var e=a.css('white-space');var f=a.css('float');var g=a.css('display');var h=a.css('position');a.css({'white-space':'nowrap','float':'none','display':'inline','position':'static'});var i=a.width();var j=a.height();var k=((e==='pre-wrap')?0:j/4);if(c>0&&i>c&&i<b){var l=a.text();var m="";var n=Math.round(d/j);var o=n;while(o>1){var p=Math.round((i+k)/o-k);var q=Math.round((l.length+1)/o)-1;var r=new NextWS_params();z(a,l,c,p,-1,q,r);var s=new NextWS_params();q=r.index;z(a,l,c,p,+1,q,s);r.reset();q=s.index;z(a,l,c,p,-1,q,r);var t;if(r.index===0){t=s.index}else if((c<s.width)||(r.index===s.index)){t=r.index}else{t=((Math.abs(p-r.width)<Math.abs(s.width-p))?r.index:s.index)}m+=l.substr(0,t);m+='<br data-owner="balance-text" />';l=l.substr(t);o--;a.text(l);i=a.width()}a.html(m+l)}a.css({'position':h,'display':g,'float':f,'white-space':e})})}}(jQuery));function applyBalanceText(){"use strict";$(".balance-text").balanceText()}applyBalanceText();$(window).resize(applyBalanceText);